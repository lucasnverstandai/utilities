jQuery.htmlPrefilter=function(e){return e};const visObject={options:{},create:function(e,t){$("head").append('<style type="text/css">\n\n#container2,\n#container3, #legend {\n    height: 85px;\n}\n\n.plotbandContainer, #legend{ height:85px;width:100%;}\n\n\n\n\n.hc-cat-title {\n    font-size: 13px;\n    font-weight: bold;\n}\n\n.highcharts-figure,\n.highcharts-data-table table {\n    min-width: 320px;\n    max-width: 800px;\n    margin: 1em auto;\n}\n\n.highcharts-data-table table {\n    font-family: Verdana, sans-serif;\n    border-collapse: collapse;\n    border: 0px solid #ebebeb;\n    margin: 10px auto;\n    text-align: center;\n    width: 100%;\n    max-width: 500px;\n}\n\n.highcharts-data-table caption {\n    padding: 1em 0;\n    font-size: 1.2em;\n    color: #555;\n}\n\n.highcharts-data-table th {\n    font-weight: 600;\n    padding: 0.5em;\n}plotBand.label.attr({text:undefined});\n\n.highcharts-data-table td,\n.highcharts-data-table th,\n.highcharts-data-table caption {\n    padding: 0.5em;\n}\n\n.highcharts-data-table thead tr,\n.highcharts-data-table tr:nth-child(even) {\n    background: #f8f8f8;\n}\n\n.highcharts-data-table tr:hover {\n    background: #f1f7ff;\n}\n\n.highcharts-description {\n    margin: 0.3rem 10px;\n}\n\n.custom-tooltip {\n  /*margin-left:5px;\n  margin-top:180px;*/\n\n}\n\n.custom-tooltip span {\n  color:#D1A217;\n}</style>')},updateConfigOption:function(e){let t=e.fields.dimensions,a=e.fields.measures,n=e.fields.table_calculations,r=[],i=[],l=[];t.forEach(e=>{let t={};t[e.label_short||e.label]=e.name,r.push(t),l.push(t)}),a.forEach(e=>{let t={};t[e.label_short]=e.name,a.push(t),i.push(t),l.push(t)}),n.forEach(e=>{let t={};t[e.label]=e.name,l.push(t)}),this.trigger("registerOptions",{primary_measure:{section:"Data Mapping",type:"string",label:"Primary Measure",values:i,display:"select",order:2},toggle_measure_label:{section:"Theme",type:"boolean",label:"Show Bar Value",display:"Show Label",default:!1,order:7},toggle_legend:{section:"Theme",type:"boolean",label:"Show Legend",display:"Show Label",default:!1,order:6},toogle_label_arrow:{section:"Theme",type:"boolean",label:"Show Bar Arrow",display:"Show Bar Arrow",default:!0,order:8},bar_color:{type:"string",label:"Primary Color",section:"Theme",order:1,placeholder:"#4BD8D4",default:"#4BD8D4"},bar_min_height:{type:"number",label:"Bar Min height (px)",section:"Theme",order:3,default:60,placeholder:"65"},bar_max_height:{type:"number",label:"Bar Max height (px)",section:"Theme",order:4,default:100,placeholder:"85"},bar_margin:{type:"number",label:"Bar Margin (px)",section:"Theme",order:5,default:25,placeholder:"25"},plotband_colors:{type:"array",label:"PlotBand Color Ranges",section:"Theme",order:2,placeholder:"#FFF100, #16C60C, #886CE4, etc..."}})},generateGraph:function(e,t){},updateAsync:function(e,t,a,n,r,i){if(look_vis=this,look_vis.l_config=a,a.bar_height=Math.round($("#vis").height()/e.length),a.bar_height<=a.bar_min_height&&(a.bar_height=a.bar_min_height),a.bar_height>=a.bar_max_height&&(a.bar_height=a.bar_max_height),this.clearErrors(),this.updateConfigOption(n),n.fields.dimensions.length<1){this.addError({title:"No Dimensions",message:"This chart requires a minimum of 1 dimension."});return}if(!look_vis.l_config.primary_measure){this.addError({title:"Setting Missing",message:"Please define the Primary Measure."});return}Highcharts.setOptions({chart:{inverted:!0,marginTop:25,marginBottom:look_vis.l_config.bar_margin,marginLeft:135,title:null,type:"bullet"},title:{text:null},legend:{enabled:!1},xAxis:{lineWidth:0,borderWidth:0,minorGridLineWidth:0,gridLineWidth:0,alternateGridColor:null,title:null},yAxis:{min:0,borderWidth:0,minorGridLineWidth:0,gridLineWidth:0,alternateGridColor:null,title:null,labels:{enabled:!1}},plotOptions:{bullet:{borderWidth:0,borderRadius:"0%",borderPadding:10,groupPadding:0,dataLabels:{enabled:a.toggle_measure_label,shadow:!1},cursor:"pointer"},series:{pointPadding:0,borderWidth:0,borderPadding:0,color:"#4BD8D4",targetOptions:{height:0,borderWidth:0}}},credits:{enabled:!1},exporting:{enabled:!1}});let l=n.fields.dimensions,o=n.fields.measures,s=l.concat(o),d=[],h=[],c=[],g=[],p=[],m;s.forEach(e=>{"dimension"===e.category?(d.push(e),c.push(e.short_label)):"measure"===e.category&&(e.name!==a.primary_measure?(h.push(e),g.push(e.short_label)):e.name===a.primary_measure&&(m=e))});var b='<figure className="highcharts-figure">',u=0;e.forEach(e=>{b+='<div id="container'+ ++u+'" class="plotbandContainer" style="min-height:60px;height:'+look_vis.l_config.bar_height+'px;"></div>'}),b+='<div id="legend"></div></figure>',$("#vis").html(b),u=0,e.forEach(e=>{var t=[],n=0,r=e[m.name];n=r.value,h.forEach(t=>{e[t.name].value>n&&(n=e[t.name].value)}),plotbandWidth=Math.round(n/300),capValue=n+n/10;var i=0;h.forEach(n=>{var r={from:e[n.name].value,to:e[n.name].value+plotbandWidth,color:a.plotband_colors[i],id:n.label_short+"band",tooltipText:n.label_short,zIndex:5,label:{text:n.label_short,align:"center",allowOverlap:!0,inside:!1,y:-4,style:{color:"#000",fontSize:12}},animation:{duration:1500}};0===u&&p.push({name:n.label_short,color:a.plotband_colors[i],id:n.label_short+"band",data:[]}),t.push(r),i++}),t.push({from:0,to:capValue+1e3,color:"#D9D9D9"}),u++,Highcharts.chart("container"+u,{chart:{events:{render(){if(!1!==look_vis.l_config.toogle_label_arrow){var e,t,n,r=this,i=r.yAxis[0],l=r.series[0];r.customSvgElems&&r.customSvgElems.forEach(function(e){e.destroy()}),r.customSvgElems=[],l.data.forEach(function(l,o){t=i.toPixels(l.y),n=look_vis.l_config.bar_height-look_vis.l_config.bar_margin,e=r.renderer.path(["M",t,n,"L",t+8,n+10,"L",t-8,n+10,"z"]).attr({fill:a.bar_color,stroke:a.bar_color,zIndex:10,opacity:0,"stroke-width":0}).animate({opacity:1},{defer:1e3}).add().toFront(),r.customSvgElems.push(e)})}}}},xAxis:{categories:['<span class="hc-cat-title">'+e[d[0].name].value+"</span>"]},yAxis:{borderWidth:0,plotBands:t,labels:{format:"{value}"}},plotOptions:{series:{color:a.bar_color}},series:[{id:"metric",data:[{y:r.value,target:n}]}],tooltip:{outside:!0,backgroundColor:null,pointFormat:"",borderColor:null,borderRadius:0,shared:!1,hideDelay:100,animation:!0,followPointer:!0,shadow:!1,useHTML:!0,formatter:function(t){return e[m.name].html}}})}),look_vis.l_config.toggle_legend&&Highcharts.chart("legend",{chart:{type:"bar",spacing:[0,0,0,0],marginTop:0,marginBottom:0,spacingTop:0},title:{text:null},yAxis:{visible:!1},xAxis:{visible:!1},legend:{enabled:!0,padding:0,margin:0,verticalAlign:"middle"},plotOptions:{series:{events:{legendItemClick:function(e){legend=this,Highcharts.charts.forEach(function(e,t){"legend"!==e.renderTo.id&&e.yAxis[0].plotLinesAndBands.forEach(function(e,t){e.id===legend.options.id&&(e.hidden?(e.hidden=!1,e.label.attr({text:legend.options.name}),e.svgElem.element.style.opacity=1,e.svgElem.element.style["pointer-events"]="all"):(e.hidden=!0,e.svgElem.element.style.opacity=0,e.label.attr({text:void 0}),e.svgElem.element.style["pointer-events"]="none"))})})}}}},series:p}),r.print&&done(),i()}};looker.plugins.visualizations.add(visObject);